/*!
 * TagCloud.js v2.5.0
 * Copyright (c) 2016-2025 @ Cong Min
 * MIT License - https://github.com/mcc108/TagCloud
 */
((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).TagCloud=t()})(this,function(){function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)!{}.hasOwnProperty.call(i,n)||(e[n]=i[n])}return e}).apply(null,arguments)}function t(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function s(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(Object(o),!0).forEach(function(e){var t,n;t=i,n=o[e=e],(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function c(e){return(e=>{if(Array.isArray(e))return i(e)})(e)||(e=>{if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)})(e)||u(e)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function r(e){e=((e,t)=>{if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=typeof(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string");return"symbol"==typeof e?e:e+""}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n;if(e)return"string"==typeof e?i(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}var h=(()=>{function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,i=this,o=r;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");i=this;if(!e||1!==e.nodeType)return new Error("Incorrect element type");i.$container=e,i.texts=t||[],i.config=s(s({},r._defaultConfig),n||{}),i._processTexts(),i._calculateDimensions(),i.radius=Math.min(i.containerWidth,i.containerHeight)/2,i.depth=2*i.radius,i.size=1.5*i.radius,i.maxSpeed=r._getMaxSpeed(i.config.maxSpeed),i.initSpeed=r._getInitSpeed(i.config.initSpeed),i.direction=i.config.direction,i.keep=i.config.keep,i.paused=!1,i._createElment(),i._init(),r.list.push({el:i.$el,container:e,instance:i})}return e=r,n=[{key:"_on",value:function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on".concat(t),n):e["on".concat(t)]=n}}],(t=[{key:"_calculateFontSize",value:function(e,t,n){var i=this.config,o=i.minFontSize,i=i.maxFontSize;return o===i||t===n?o:o+(i-o)*((e-t)/(n-t))}},{key:"_getColorByWeight",value:function(e,t,n){e=(e-t)/(n-t),t=240-240*(e=t===n?.5:e),n=60+40*e,e=65-30*e;return"hsl(".concat(t,", ").concat(n,"%, ").concat(e,"%)")}},{key:"_calculateDimensions",value:function(){var e,t,n=this;n.config.width&&n.config.height?(n.containerWidth=n.config.width,n.containerHeight=n.config.height):(t=window.getComputedStyle(n.$container),e=n.$container.clientWidth||parseInt(t.width,10)||n.config.width||300,t=n.$container.clientHeight||parseInt(t.height,10)||n.config.height||300,n.containerWidth=e,n.containerHeight=t)}},{key:"_processTexts",value:function(){var e,t=this;t.processedTexts=t.texts.map(function(e){return"string"==typeof e?{text:e,pr:0}:"object"===l(e)&&void 0!==e.text?{text:e.text,pr:void 0!==e.pr?e.pr:1}:{text:String(e),pr:0}}),0<t.processedTexts.length?(e=t.processedTexts.map(function(e){return e.pr}),t.minWeight=Math.min.apply(Math,c(e)),t.maxWeight=Math.max.apply(Math,c(e))):(t.minWeight=1,t.maxWeight=1)}},{key:"_createElment",value:function(){var n=this,i=document.createElement("div");i.className=n.config.containerClass,n.config.useContainerInlineStyles&&(i.style.position="relative",i.style.width="".concat(n.containerWidth,"px"),i.style.height="".concat(n.containerHeight,"px")),n.items=[],n.processedTexts.forEach(function(e,t){e=n._createTextItem(e,t);i.appendChild(e.el),n.items.push(e)}),n.$container.appendChild(i),n.$el=i}},{key:"_createTextItem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this,i=document.createElement("span"),o=(i.className=n.config.itemClass,n._calculateFontSize(e.pr,n.minWeight,n.maxWeight));return n.config.useItemInlineStyles&&(i.style.willChange="transform, opacity, filter",i.style.position="absolute",i.style.top="50%",i.style.left="50%",i.style.zIndex=t+1,i.style.filter="alpha(opacity=0)",i.style.opacity=0,i.style.fontSize="".concat(o,"px"),n.config.hls&&(o=n._getColorByWeight(e.pr,n.minWeight,n.maxWeight),i.style.color=o),i.style.WebkitTransformOrigin=o="50% 50%",i.style.MozTransformOrigin=o,i.style.OTransformOrigin=o,i.style.transformOrigin=o,i.style.WebkitTransform=o="translate3d(-50%, -50%, 0) scale(1)",i.style.MozTransform=o,i.style.OTransform=o,i.style.transform=o),n.config.useHTML?i.innerHTML=e.text:i.innerText=e.text,s({el:i,weight:e.pr},n._computePosition(t))}},{key:"_computePosition",value:function(e){var t=this,n=t.processedTexts.length,e=(1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(e=Math.floor(Math.random()*(n+1))),Math.acos((2*e+1)/n-1)),n=Math.sqrt((n+1)*Math.PI)*e,i=t.containerWidth/(2*t.radius),o=t.containerHeight/(2*t.radius);return{x:t.size*Math.cos(n)*Math.sin(e)*i/2,y:t.size*Math.sin(n)*Math.sin(e)*o/2,z:t.size*Math.cos(e)*1/2}}},{key:"_requestInterval",value:function(n,i){var o=window.requestAnimationFrame,r=(new Date).getTime(),a={};return a.value=o(function e(){a.value=o(e);var t=(new Date).getTime();i<=t-r&&(n.call(),r=(new Date).getTime())}),a}},{key:"_init",value:function(){var n=this,e=(n.active=!1,n.mouseX0=n.initSpeed*Math.sin(n.direction*(Math.PI/180)),n.mouseY0=-n.initSpeed*Math.cos(n.direction*(Math.PI/180)),n.mouseX=n.mouseX0,n.mouseY=n.mouseY0,window.matchMedia("(hover: hover)"));e&&!e.matches||(r._on(n.$el,"mouseover",function(){n.active=!0}),r._on(n.$el,"mouseout",function(){n.active=!1}),r._on(n.keep?window:n.$el,"mousemove",function(e){e=e||window.event;var t=n.$el.getBoundingClientRect();n.mouseX=(e.clientX-(t.left+t.width/2))/5,n.mouseY=(e.clientY-(t.top+t.height/2))/5})),n._next(),n.interval=n._requestInterval(function(){n._next.call(n)},10),n.config.autoResize&&n._setupResizeObserver()}},{key:"_setupResizeObserver",value:function(){var c=this;void 0!==window.ResizeObserver?(c.resizeObserver=new window.ResizeObserver(function(e){var t,n=((e,t)=>{var n,i,o,r,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return o=!(i=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,n=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(a=u(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})(e);try{for(n.s();!(t=n.n()).done;){var i,o,r,a,s=t.value;s.target===c.$container&&(i=s.contentRect.width||c.$container.clientWidth,o=s.contentRect.height||c.$container.clientHeight,r=i!==c.containerWidth,a=o!==c.containerHeight,r||a)&&c._handleResize(i,o)}}catch(e){n.e(e)}finally{n.f()}}),c.resizeObserver.observe(c.$container)):r._on(window,"resize",function(){var e=c.$container.clientWidth,t=c.$container.clientHeight,n=e!==c.containerWidth,i=t!==c.containerHeight;(n||i)&&c._handleResize(e,t)})}},{key:"_handleResize",value:function(e,t){var n=this,i=Math.abs(e-n.containerWidth),o=Math.abs(t-n.containerHeight);i<1&&o<1||(n._resizeTimeout&&clearTimeout(n._resizeTimeout),n._resizeTimeout=setTimeout(function(){n._performResize(e,t),n._resizeTimeout=null},16))}},{key:"_performResize",value:function(e,t){var n=this;n.containerWidth=e,n.containerHeight=t,n.radius=Math.min(n.containerWidth,n.containerHeight)/2,n.depth=2*n.radius,n.size=1.5*n.radius,n.config.useContainerInlineStyles&&(t="auto"!==(e=window.getComputedStyle(n.$container)).width&&!e.width.includes("%"),e="auto"!==e.height&&!e.height.includes("%"),(t||n.config.width)&&(n.$el.style.width="".concat(n.containerWidth,"px")),e||n.config.height)&&(n.$el.style.height="".concat(n.containerHeight,"px")),n.items.forEach(function(e,t){t=n._computePosition(t);e.x=t.x,e.y=t.y,e.z=t.z})}},{key:"_next",value:function(){var e,t,n,a,s=this;s.paused||(s.keep||s.active||(s.mouseX=Math.abs(s.mouseX-s.mouseX0)<1?s.mouseX0:(s.mouseX+s.mouseX0)/2,s.mouseY=Math.abs(s.mouseY-s.mouseY0)<1?s.mouseY0:(s.mouseY+s.mouseY0)/2),e=-(Math.min(Math.max(-s.mouseY,-s.size),s.size)/s.radius)*s.maxSpeed,t=Math.min(Math.max(-s.mouseX,-s.size),s.size)/s.radius*s.maxSpeed,s.config.reverseDirection&&(e=-e,t=-t),Math.abs(e)<=.01&&Math.abs(t)<=.01)||(n=Math.PI/180,a=[Math.sin(e*n),Math.cos(e*n),Math.sin(t*n),Math.cos(t*n)],s.items.forEach(function(e){var t=e.x,n=e.y*a[0]+e.z*a[1],i=e.y*a[1]+e.z*-a[0],o=n*a[3]-t*a[2],r=2*s.depth/(2*s.depth+o);e.x=t*a[3]+n*a[2],e.y=i,e.z=o,e.scale=r.toFixed(3);t=(1<(t=r*r-.25)?1:t).toFixed(3),n=e.el,i=(e.x-n.offsetWidth/2).toFixed(2),o=(e.y-n.offsetHeight/2).toFixed(2),r="translate3d(".concat(i,"px, ").concat(o,"px, 0) scale(").concat(e.scale,")");n.style.WebkitTransform=r,n.style.MozTransform=r,n.style.OTransform=r,n.style.transform=r,n.style.filter="alpha(opacity=".concat(100*t,")"),n.style.opacity=t}))}},{key:"update",value:function(e){var o=this,e=(o.texts=e||[],o._processTexts(),o.processedTexts.forEach(function(e,t){var n,i=o.items[t];i?(n=o._calculateFontSize(e.pr,o.minWeight,o.maxWeight),o.config.useItemInlineStyles&&(i.el.style.fontSize="".concat(n,"px"),o.config.hls)&&(n=o._getColorByWeight(e.pr,o.minWeight,o.maxWeight),i.el.style.color=n),o.config.useHTML?i.el.innerHTML=e.text:i.el.innerText=e.text,i.weight=e.pr):(a(i=o._createTextItem(e,t),o._computePosition(t,!0)),o.$el.appendChild(i.el),o.items.push(i))}),o.processedTexts.length),t=o.items.length;e<t&&o.items.splice(e,t-e).forEach(function(e){o.$el.removeChild(e.el)})}},{key:"destroy",value:function(){var t=this,e=(t.interval=null,t.resizeObserver&&(t.resizeObserver.disconnect(),t.resizeObserver=null),t._resizeTimeout&&(clearTimeout(t._resizeTimeout),t._resizeTimeout=null),r.list.findIndex(function(e){return e.el===t.$el}));-1!==e&&r.list.splice(e,1),t.$container&&t.$el&&t.$container.removeChild(t.$el)}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n})();h.list=[],h._defaultConfig={radius:100,width:null,height:null,maxSpeed:"normal",initSpeed:"normal",direction:135,keep:!0,reverseDirection:!1,useContainerInlineStyles:!0,useItemInlineStyles:!0,containerClass:"tagcloud",itemClass:"tagcloud--item",useHTML:!1,minFontSize:12,maxFontSize:12,hls:!1,autoResize:!0},h._getMaxSpeed=function(e){return{slow:.5,normal:1,fast:2}[e]||1},h._getInitSpeed=function(e){return{slow:16,normal:32,fast:80}[e]||32};return function(e,t,n){(e="string"==typeof e?document.querySelectorAll(e):e).forEach||(e=[e]);var i=[];return e.forEach(function(e){e&&i.push(new h(e,t,n))}),i.length<=1?i[0]:i}});
