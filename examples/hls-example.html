<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TagCloud HLS é¢œè‰²åŠŸèƒ½æ¼”ç¤º</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin: 0;
        }

        .container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .demo {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .demo:hover {
            transform: translateY(-5px);
        }

        .demo h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.3em;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .tagcloud {
            border-radius: 10px;
            background: #fafafa;
            border: 1px solid #eee;
        }

        .tagcloud--item {
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .tagcloud--item:hover {
            filter: brightness(1.2) drop-shadow(0 0 8px currentColor);
        }

        .controls {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .controls h3 {
            color: #333;
            margin-bottom: 20px;
        }

        .control-group {
            margin: 15px 0;
        }

        .control-group label {
            display: inline-block;
            width: 120px;
            text-align: right;
            margin-right: 10px;
            color: #555;
        }

        .control-group button {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
            transition: background 0.3s;
        }

        .control-group button:hover {
            background: #5a6fd8;
        }

        .control-group button.active {
            background: #764ba2;
        }

        .info {
            background: #e8f4f8;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .info h4 {
            margin: 0 0 10px 0;
            color: #1976D2;
        }

        .info p {
            margin: 5px 0;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ¨ TagCloud HLS é¢œè‰²åŠŸèƒ½</h1>
        <p>æ ¹æ®æƒé‡è‡ªåŠ¨è°ƒæ•´æ ‡ç­¾é¢œè‰²çš„3Dæ ‡ç­¾äº‘</p>
    </div>

    <div class="controls">
        <h3>âš™ï¸ å®æ—¶æ§åˆ¶</h3>
        <div class="control-group">
            <label>é¢œè‰²æ¨¡å¼:</label>
            <button id="toggleHls" class="active">HLS é¢œè‰²</button>
            <button id="toggleNormal">æ™®é€šæ¨¡å¼</button>
        </div>
        <div class="control-group">
            <label>å­—ä½“å¤§å°:</label>
            <button id="sameSize">ç›¸åŒå¤§å°</button>
            <button id="diffSize" class="active">æƒé‡å¤§å°</button>
        </div>
        <div class="control-group">
            <label>æ•°æ®æ›´æ–°:</label>
            <button id="updateData">æ›´æ–°æ•°æ®</button>
            <button id="resetData">é‡ç½®æ•°æ®</button>
        </div>
    </div>

    <div class="info">
        <h4>ğŸ“‹ åŠŸèƒ½è¯´æ˜</h4>
        <p><strong>HLS é¢œè‰²æ¨¡å¼ï¼š</strong>æ ¹æ®æƒé‡å€¼è‡ªåŠ¨è®¡ç®—HSLé¢œè‰²ï¼Œä»å†·è‰²åˆ°æš–è‰²æ¸å˜</p>
        <p><strong>æƒé‡è§„åˆ™ï¼š</strong>å¯¹è±¡æ ¼å¼å¯è®¾ç½® pr å€¼ï¼Œå­—ç¬¦ä¸²æ ¼å¼é»˜è®¤ pr = 0</p>
        <p><strong>é¢œè‰²ç®—æ³•ï¼š</strong>è“è‰²(240Â°)â†’é’è‰²â†’ç»¿è‰²â†’é»„è‰²â†’çº¢è‰²(0Â°)ï¼Œé¥±å’Œåº¦60%â†’100%ï¼Œäº®åº¦65%â†’35%</p>
    </div>

    <div class="container">
        <div class="demo">
            <h3>ğŸ”¤ æ··åˆæ•°æ®ç±»å‹æ¼”ç¤º</h3>
            <p>å­—ç¬¦ä¸² + å¯¹è±¡æ··åˆï¼Œå±•ç¤ºé»˜è®¤æƒé‡å·®å¼‚</p>
            <div id="tagcloud1"></div>
        </div>

        <div class="demo">
            <h3>ğŸ“Š æƒé‡æ¢¯åº¦æ¼”ç¤º</h3>
            <p>ä»ä½æƒé‡åˆ°é«˜æƒé‡çš„é¢œè‰²æ¸å˜</p>
            <div id="tagcloud2"></div>
        </div>

        <div class="demo">
            <h3>ğŸ¯ æŠ€æœ¯æ ˆæ¼”ç¤º</h3>
            <p>çœŸå®æŠ€æœ¯æ ‡ç­¾çš„æƒé‡åˆ†å¸ƒ</p>
            <div id="tagcloud3"></div>
        </div>

        <div class="demo">
            <h3>ğŸŒˆ å½©è™¹æƒé‡æ¼”ç¤º</h3>
            <p>å¤§èŒƒå›´æƒé‡å€¼çš„é¢œè‰²è¡¨ç°</p>
            <div id="tagcloud4"></div>
        </div>
    </div>

    <script src="../dist/TagCloud.js"></script>
    <script>
        // å…¨å±€å˜é‡å­˜å‚¨æ ‡ç­¾äº‘å®ä¾‹
        let tagClouds = [];
        let currentHls = true;
        let currentSameSize = false;

        // æ•°æ®é›†
        const datasets = {
            mixed: [
                'HTML', // å­—ç¬¦ä¸²ï¼Œé»˜è®¤ pr = 0
                'CSS',  // å­—ç¬¦ä¸²ï¼Œé»˜è®¤ pr = 0
                {text: 'JavaScript', pr: 8},
                {text: 'TypeScript', pr: 6},
                {text: 'React', pr: 9},
                'Vue'   // å­—ç¬¦ä¸²ï¼Œé»˜è®¤ pr = 0
            ],

            gradient: [
                {text: 'æƒé‡1', pr: 1},
                {text: 'æƒé‡2', pr: 2},
                {text: 'æƒé‡3', pr: 3},
                {text: 'æƒé‡4', pr: 4},
                {text: 'æƒé‡5', pr: 5},
                {text: 'æƒé‡6', pr: 6},
                {text: 'æƒé‡7', pr: 7},
                {text: 'æƒé‡8', pr: 8}
            ],

            tech: [
                {text: 'React', pr: 95},
                {text: 'Vue', pr: 85},
                {text: 'Angular', pr: 70},
                {text: 'JavaScript', pr: 98},
                {text: 'TypeScript', pr: 88},
                {text: 'Node.js', pr: 82},
                {text: 'Express', pr: 75},
                {text: 'MongoDB', pr: 65},
                {text: 'PostgreSQL', pr: 72},
                {text: 'Docker', pr: 80},
                {text: 'AWS', pr: 78},
                {text: 'Git', pr: 92}
            ],

            rainbow: [
                {text: 'Ultra Low', pr: 1},
                {text: 'Very Low', pr: 10},
                {text: 'Low', pr: 25},
                {text: 'Medium Low', pr: 40},
                {text: 'Medium', pr: 50},
                {text: 'Medium High', pr: 60},
                {text: 'High', pr: 75},
                {text: 'Very High', pr: 90},
                {text: 'Ultra High', pr: 100}
            ]
        };

        // åˆå§‹åŒ–æ ‡ç­¾äº‘
        function initTagClouds() {
            const configs = [
                { data: datasets.mixed, container: '#tagcloud1' },
                { data: datasets.gradient, container: '#tagcloud2' },
                { data: datasets.tech, container: '#tagcloud3' },
                { data: datasets.rainbow, container: '#tagcloud4' }
            ];

            tagClouds = configs.map(config => {
                return TagCloud(config.container, config.data, {
                    radius: 150,
                    maxSpeed: 'normal',
                    initSpeed: 'normal',
                    direction: 135,
                    keep: true,
                    hls: currentHls,
                    minFontSize: currentSameSize ? 14 : 12,
                    maxFontSize: currentSameSize ? 14 : 20
                });
            });
        }

        // æ›´æ–°æ‰€æœ‰æ ‡ç­¾äº‘çš„é…ç½®
        function updateAllConfigs() {
            tagClouds.forEach(cloud => {
                if (cloud && cloud.config) {
                    cloud.config.hls = currentHls;
                    cloud.config.minFontSize = currentSameSize ? 14 : 12;
                    cloud.config.maxFontSize = currentSameSize ? 14 : 20;

                    // é‡æ–°å¤„ç†æ–‡æœ¬ä»¥åº”ç”¨æ–°é…ç½®
                    cloud._processTexts();

                    // æ›´æ–°æ¯ä¸ªé¡¹ç›®çš„æ ·å¼
                    cloud.items.forEach((item, index) => {
                        const textObj = cloud.processedTexts[index];
                        if (textObj && cloud.config.useItemInlineStyles) {
                            const fontSize = cloud._calculateFontSize(
                                textObj.pr, cloud.minWeight, cloud.maxWeight
                            );
                            item.el.style.fontSize = `${fontSize}px`;

                            if (cloud.config.hls) {
                                const color = cloud._getColorByWeight(
                                    textObj.pr, cloud.minWeight, cloud.maxWeight
                                );
                                item.el.style.color = color;
                            } else {
                                item.el.style.color = ''; // é‡ç½®ä¸ºé»˜è®¤é¢œè‰²
                            }
                        }
                    });
                }
            });
        }

        // æ§åˆ¶æŒ‰é’®äº‹ä»¶
        document.getElementById('toggleHls').addEventListener('click', function() {
            currentHls = true;
            updateButtons();
            updateAllConfigs();
        });

        document.getElementById('toggleNormal').addEventListener('click', function() {
            currentHls = false;
            updateButtons();
            updateAllConfigs();
        });

        document.getElementById('sameSize').addEventListener('click', function() {
            currentSameSize = true;
            updateButtons();
            updateAllConfigs();
        });

        document.getElementById('diffSize').addEventListener('click', function() {
            currentSameSize = false;
            updateButtons();
            updateAllConfigs();
        });

        document.getElementById('updateData').addEventListener('click', function() {
            // éšæœºæ›´æ–°ç¬¬ä¸‰ä¸ªæ ‡ç­¾äº‘çš„æ•°æ®
            const newTechData = [
                {text: 'Svelte', pr: 75},
                {text: 'Next.js', pr: 88},
                {text: 'Nuxt.js', pr: 78},
                {text: 'Vite', pr: 82},
                {text: 'Webpack', pr: 70},
                {text: 'ESLint', pr: 65},
                {text: 'Prettier', pr: 68},
                {text: 'Jest', pr: 72}
            ];

            if (tagClouds[2]) {
                tagClouds[2].update(newTechData);
            }
        });

        document.getElementById('resetData').addEventListener('click', function() {
            if (tagClouds[2]) {
                tagClouds[2].update(datasets.tech);
            }
        });

        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        function updateButtons() {
            // HLS æŒ‰é’®
            document.getElementById('toggleHls').className = currentHls ? 'active' : '';
            document.getElementById('toggleNormal').className = currentHls ? '' : 'active';

            // å­—ä½“å¤§å°æŒ‰é’®
            document.getElementById('sameSize').className = currentSameSize ? 'active' : '';
            document.getElementById('diffSize').className = currentSameSize ? '' : 'active';
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initTagClouds();
            updateButtons();

            // æ·»åŠ ä¸€äº›åŠ¨æ€æ•ˆæœ
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);
        });

        // é¡µé¢æ ·å¼åˆå§‹åŒ–
        document.body.style.opacity = '0';
        document.body.style.transition = 'opacity 0.5s ease-in-out';
    </script>
</body>
</html>
